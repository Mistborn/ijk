(function(){var a;a=function(){var m,S,z,I,F,d,e,q,U,f,x,H,w,k,T,j,s,b,h,R,y,G,C,Q,p,A,l,n,t,E,o,L,v,D,g,B,P,u,K,O,N,M,r,i,J;x=6;U=1000*60*60*24;w=U*365.25;H=12;f=5;$.datepicker.setDefaults({dateFormat:"yy-mm-dd",autoSize:true,currentText:"hodiaŭ",gotoCurrent:true,hideIfNoPrevNextType:true,showOtherMonths:true,selectOtherMonths:true,showButtonPanel:false,changeMonth:false,changeYear:false,yearRange:""+window.KOMENCJARO+":"+window.KOMENCJARO,dayNames:["dimanĉo","lundo","mardo","merkredo","ĵaŭdo","vendredo","sabato"],dayNamesMin:["di","lu","ma","me","ĵa","ve","sa"],monthNames:["januaro","februaro","marto","aprilo","majo","junio","julio","aŭgusto","septembro","oktobro","novembro","decembro"],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aŭg","sep","okt","nov","dec"]});$("#id_ekde").datepicker({defaultDate:window.KOMENCA_DATO,minDate:window.PLEJFRUA_DATO,maxDate:window.FINIGHA_DATO});$("#id_ghis").datepicker({defaultDate:window.FINIGHA_DATO,minDate:window.KOMENCA_DATO,maxDate:window.PLEJMALFRUA_DATO});$("#id_naskighdato").datepicker({changeMonth:true,changeYear:true,defaultDate:new Date(window.KOMENCA_DATO-w*25),yearRange:"-100:-2"});E=function(c){if(c){return(window.KOMENCA_DATO-c)/w}else{return c}};Q=function(W){var c,X,V;if(W==null){return null}if(!W){return false}V=parseInt(W.slice(0,4),10);X=parseInt(W.slice(5,7),10)-1;c=parseInt(W.slice(8,10),10);return new Date(V,X,c)};b=function(X){var c,W,V;if(X==null){return null}if(!X){return false}V=X.getYear()+1900;W=X.getMonth()+1;if(W<10){W="0"+W}c=X.getDate();if(c<10){c="0"+c}return""+V+"-"+W+"-"+c};window.partoprenelektoj=function(){var ad,ac,af,ag,ab,aa,Z,Y,X,W,V,c,ae=this;this.ekdato=Q((ab=$("#id_ekde").val())!=null?ab:false);this.ghisdato=Q((aa=$("#id_ghis").val())!=null?aa:false);this.naskighdato=Q((Z=$("#id_naskighdato").val())!=null?Z:false);this.chu_plentempa=this.ekdato===false||this.ghisdato===false?null:this.ekdato.getTime()<=window.KOMENCA_DATO.getTime()&&this.ghisdato.getTime()>=window.FINIGHA_DATO.getTime();this.loghkategorio=(Y=$('input[name="loghkategorio"]:checked').val())!=null?Y:false;this.loghlando=(X=$("#id_loghlando :selected").val())!=null?X:false;this.landokategorio=!this.loghlando?false:window.landoj[this.loghlando];this.agho=E(this.naskighdato);this.aghkategoriaj_informoj=(function(){if(!this.agho){return this.agho}else{ag=null;af=null;for(ad in window.limaghoj){if(!(ad<this.agho||((ag!=null)&&ad>ag))){ag=ad}if(!(ad>this.agho||((af!=null)&&ad<af))){af=ad}}return window.limaghoj[ag]}}).call(this);this.aghkategorio=this.aghkategoriaj_informoj?this.aghkategoriaj_informoj[0]:this.aghkategoriaj_informoj;this.aghaldona_pago=this.aghkategoriaj_informoj?this.aghkategoriaj_informoj[1]*(1+Math.floor(this.agho)-parseInt(af)):this.aghkategoriaj_informoj;this.alighkategorio=(W=$('input[name="antaupagos_ghis"]:checked').val())!=null?W:false;this.alighlimdato=this.alighkategorio?window.limdatoj[this.alighkategorio]:false;this.unuatago=Math.max(this.ekdato,window.KOMENCA_DATO);this.lastatago=Math.min(this.ghisdato,window.FINIGHA_DATO);this.tranoktoj=Math.floor((this.lastatago-this.unuatago)/U);this.superaj_tranoktoj=(function(){var ah,ai;ah=ae.ekdato<ae.unuatago?Math.floor((ae.unuatago-ae.ekdato)/U):0;ai=ae.ghisdato>ae.lastatago?Math.floor((ae.ghisdato-ae.lastatago)/U):0;return ah+ai})();this.partoprentagoj=Math.floor((this.lastatago-this.unuatago)/U)+1;this.relativa_partopreno=this.chu_plentempa?1:this.partoprentagoj/5;this.manghorelativeco=this.chu_plentempa?1:this.partoprentagoj/6;this.loghkosto=(function(){var ah;if(ae.agho!==false&&ae.agho<f){return 0}if(!(ae.loghkategorio!==false&&(ae.chu_plentempa!=null))){return false}if(window.loghkategorioj[ae.loghkategorio]==null){return null}ah=window.loghkategorioj[ae.loghkategorio],ae.plentempa=ah[0],ae.eksterkongresa=ah[1];if(ae.chu_plentempa){return ae.plentempa+ae.superaj_tranoktoj*ae.eksterkongresa}else{return(ae.tranoktoj+ae.superaj_tranoktoj)*ae.eksterkongresa}})();this.programkotizo=this.agho!==false&&this.agho<H?0:!((this.aghkategorio!=null)&&(this.landokategorio!=null)&&(this.alighkategorio!=null))?null:this.aghkategorio===false||this.landokategorio===false||this.alighkategorio===false?false:(V=window.programkotizoj[this.aghkategorio])!=null?(c=V[this.landokategorio])!=null?c[this.alighkategorio]:void 0:void 0;if(this.programkotizo){this.programkotizo*=this.relativa_partopreno}if(this.programkotizo){this.programkotizo+=this.aghaldona_pago?this.aghaldona_pago:0}this.chu_tagmangho=(function(){var ak,ao,an,am,ai,ah,al,aj;al=$('[name="manghomendoj"]:checked');for(an=0,ai=al.length;an<ai;an++){ao=al[an];aj=$("label[for='"+($(ao).attr("id"))+"']");for(am=0,ah=aj.length;am<ah;am++){ak=aj[am];if($(ak).text().toLowerCase().indexOf("tag")!==-1){return true}}}return false})();this.chu_viando=(function(){var ah,ai;if(window.krompagtipoj.viando==null){return null}ai=$('[name="manghotipo"]:checked').attr("id");ah=$("label[for='"+ai+"']").text().toLowerCase();return ae.chu_tagmangho&&-1!==ah.indexOf("viand")})();ac=0;$('input[name="manghomendoj"]:checked').each(function(){return ac+=window.manghomendotipoj[$(this).val()]});this.manghokosto=isNaN(ac)?null:ac;if(this.manghokosto){if(this.chu_viando){this.manghokosto+=window.krompagtipoj.viando}this.manghokosto*=this.manghorelativeco}this.uearabato=!$("#id_chu_ueamembro").is(":checked")||!this.programkotizo>0?0:(this.landokategorio!=null)&&this.programkotizo>0?this.landokategorio!==false?window.uearabatoj[this.landokategorio]:false:null;if(this.uearabato>0&&this.relativa_partopreno<1){this.uearabato*=this.relativa_partopreno}this.chu_invitletero=$("#id_chu_bezonas_invitleteron").is(":checked");return this.chu_ekskurso=$("#id_chu_tuttaga_ekskurso").is(":checked")};$("#js-active").val(1);$(".fakturo-placeholder").addClass("fakturo");$(".fakturo").append('<span class="label">Kotizo: </span>');d=$("<ul></ul>").appendTo(".fakturo");l=["programo","loghado","mangho","ekskurso","invitletero","uearabato","sumo"];for(O=0,r=l.length;O<r;O++){C=l[O];B=(function(){switch(C){case"programo":return"";case"uearabato":return"\u2013";case"sumo":return"=";default:return"+"}})();d.append("<li class='"+C+"-li'>            <div class='kotizo-signo "+C+"-signo'>"+B+"</div>            <div class='kotizo-ero "+C+"-ero'>                <div class='kotizo-kosto "+C+"-kosto'></div>                <div class='kotizo-klarigo "+C+"-klarigo'></div>            </div>        </li>")}$(".mangho-klarigo").text("manĝado");$(".programo-klarigo").text("programo");$(".ekskurso-klarigo").text("ekskurso");$(".invitletero-klarigo").text("invitletero");$(".uearabato-klarigo").text("UEA-rabato");$(".sumo-klarigo").text("sumo");n=function(){var W,aa,Z,c,X,V,Y;Z=new partoprenelektoj;V=0;Y="(nedifinita)";aa="(elektu)";if(Z.manghokosto!=null){$(".mangho-kosto").text(Z.manghokosto);V+=Z.manghokosto;if(Z.chu_viando){$(".mangho-klarigo").text("manĝado (viande)")}else{$(".mangho-klarigo").text("manĝado")}}else{$(".mangho-kosto").text(Y)}if(Z.loghkosto===false){$(".loghado-kosto").text(aa);$(".loghado-klarigo").text("loĝado")}else{if(Z.loghkosto!=null){V+=Z.loghkosto;X=(function(){if(Z.chu_plentempa){if(Z.superaj_tranoktoj===0){return"plentempa loĝado"}else{if(Z.superaj_tranoktoj===1){return"plentempa loĝado kaj aldona tranokto"}else{return"plentempa loĝado kaj "+Z.superaj_tranoktoj+"                                 aldonaj tranoktoj"}}}else{return"loĝado por "+(Z.tranoktoj+Z.superaj_tranoktoj)+"                       noktoj"}})();$(".loghado-kosto").text(Z.loghkosto);$(".loghado-klarigo").text(X)}else{$(".loghado-kosto").text(Y);$(".loghado-klarigo").text("loĝado")}}if(Z.programkotizo===false){W=[];if(Z.naskighdato===false){W.push("naskiĝdaton")}if(Z.landokategorio===false){W.push("loĝlandon")}if(Z.alighkategorio===false){W.push("antaŭpagan daton")}$(".programo-kosto").text("(elektu "+(W.join(" kaj "))+")");$(".programo-klarigo").text("programo")}else{if(Z.programkotizo===0){c="programo";$(".programo-klarigo").text(c);$(".programo-kosto").text(Z.programkotizo)}else{if(Z.programkotizo!=null){c="programo";if(!Z.chu_plentempa){c+=" por "+Z.partoprentagoj+" tagoj"}$(".programo-klarigo").text(c);$(".programo-kosto").text(Z.programkotizo);V+=Z.programkotizo}else{$(".programo-klarigo").text("programo");$(".programo-kosto").text(Y)}}}if(Z.chu_ekskurso){$(".ekskurso-li").show();V+=window.krompagtipoj.ekskurso;$(".ekskurso-kosto").text(window.krompagtipoj.ekskurso)}else{$(".ekskurso-li").hide()}if(Z.chu_invitletero){$(".invitletero-li").show();V+=window.krompagtipoj.invitletero;$(".invitletero-kosto").text(window.krompagtipoj.invitletero)}else{$(".invitletero-li").hide()}if(Z.uearabato!=null){if(Z.uearabato===false){$(".uearabato-li").show();$(".uearabato-kosto").text("(elektu loĝlandon)")}else{if(Z.uearabato>0){V-=Z.uearabato;$(".uearabato-li").show();$(".uearabato-kosto").text(Z.uearabato)}else{$(".uearabato-li").hide()}}}else{$(".uearabato-li").show();$(".uearabato-kosto").text(Y)}$(".sumo-kosto").text(""+V+" €");return $("#id_alighila_kotizo").val(V)};t=["#id_naskighdato","#id_loghlando",'input[name="loghkategorio"]','input[name="manghomendoj"]','[name="manghotipo"]',"#id_chu_ueamembro","#id_ekde","#id_ghis","#id_chu_bezonas_invitleteron","#id_chu_tuttaga_ekskurso",'input[name="antaupagos_ghis"]'];for(N=0,i=t.length;N<i;N++){g=t[N];$(g).change(n)}$("#id_loghlando option").each(function(){var c;c=$(this).text().match(/([^(]*)\(([^)]*)\)/);if(!(c!=null)){return}$(this).text(c[1]);return $(this).data("landokategorio"," "+c[2])});$("#id_loghlando").after('<span class="klarigo helptext"></span>').change(function(){return $(this).next(".helptext").text($(this).find(":selected").data("landokategorio"))});$("#id_loghlando").change(function(){var c;c=$(this).find(":selected").text().indexOf("Israelo")!==-1;return $('input[name="pagmaniero"]').each(function(){var V;V=$($(this).parents("li")[0]);if(V.is(':contains("nur en Israelo")')){if(c){return V.show()}else{$(this).prop("checked",false);return V.hide()}}})}).change();o=function(c){return function(){var W,V;W=q.tabs("option","active");V=W+c;if(V>=x){$("body, html").animate({scrollTop:$(".alighi").offset().top},400,"swing",function(){return $(".alighi").effect("highlight",{color:"red"})});return false}if(V<0||V>=x){return false}q.tabs("option","active",V);return false}};$(".reen, .antauen, .alighi").button();$(".reen").click(o(-1));$(".antauen").click(o(1));k=function(X,W){var c,V;c=(V=W.newTab)!=null?V:W.tab;$(".reen").button("option","disabled",c.index()===0);$(this).css("height","auto");return $(this).css("overflow","visible")};q=$("#form-tabs").tabs({hide:{effect:"slide",direction:"left"},show:{effect:"slide",direction:"right"},beforeActivate:function(aa,Z){var c,V,X,W,Y;$(this).css("height",$(this).height());$(this).css("overflow","hidden");W=Z.newTab.index()-Z.oldTab.index();if(Math.abs(W)===1){X=["left","right"]}else{X=["up","up"]}c=X[0],V=X[1];if(W<0){Y=[V,c],c=Y[0],V=Y[1]}return q.tabs("option",{hide:{effect:"slide",direction:c},show:{effect:"slide",direction:V}})},activate:k,create:k});A=window.KOMENCA_DATO.getDate();p=window.FINIGHA_DATO.getDate();R=window.PLEJFRUA_DATO.getDate();h=window.PLEJMALFRUA_DATO.getDate();v=h-R;s=(T=Q($("#id_ekde").val()))?T.getDate():A;j=(T=Q($("#id_ghis").val()))?T.getDate():p;G=[];$("#id_ekde, #id_ghis").parent().hide();$("#id_ekde, #id_ghis").prevAll(".errorlist").find("li").each(function(){return G.push($(this).text())});e=$('<ul class="errorlist"></ul>');I=(function(){var W,c,V;V=[];for(W=0,c=G.length;W<c;W++){y=G[W];V.push($("<li>"+y+"</li>").appendTo(e))}return V})();u=$(".tab").map(function(){return $(this).width()});P=Math.max.apply(Math,$.makeArray(u));K=P-300-14*6;z=$('<li class="required">        <label for="id_datogamo">La daŭro de mia partopreno:</label></li>').insertAfter($("#id_ghis").parent());if(I.length>0){z.prepend(e)}S=$("<div></div>").appendTo(z).width(K);F=$('<div id="datogamo-gvidilo"></div>').css({width:K,margin:"auto",padding:0,whiteSpace:"nowrap"});$.each((function(){J=[];for(var c=R;R<=h?c<=h:c>=h;R<=h?c++:c--){J.push(c)}return J}).apply(this),function(V,c){return $('<div class="datomarko" id="id_datomarko_'+c+'">'+c+"</div>").css({display:"inline-block",width:""+(100/v)+"%",margin:0,padding:0}).appendTo(F)});S.append(F);m=$('<div class="datogamo" id="id_datogamo"></div>').appendTo(S).css({width:K,clear:"both",left:"8px"}).slider({min:R,max:h,range:true,values:[s,j],change:function(Y,X){var c,W,V;V=X.values,c=V[0],W=V[1];$("#id_ekde").val("2013-08-"+c).change();$("#id_ghis").val("2013-08-"+W).change();$(".datomarko").each(function(){return $(this).css({fontWeight:"normal"})});return $("#id_datomarko_"+c+", #id_datomarko_"+W).css({fontWeight:"bold"})}});m.slider("values",m.slider("values"));$("<div>la oficiala daŭro de IJK estas de la "+A+"-a             ĝis la "+p+"-a de aŭgusto, 2013</div>").appendTo(S).css({width:K*(p-A)/v,height:"1em",fontSize:"80%",borderTop:"3px dotted #2a3753",margin:0,position:"relative",padding:0,left:14+(A-R)*K/v,color:"#2a3753",textAlign:"center",fontWeight:"bold"});L=null;$(".tab").each(function(){if($(this).find(".errorlist").length>0){C=$(this).attr("id");if(L==null){return L=parseInt(C.slice(C.indexOf("-")+1))}}});if(L!=null){q.tabs("option","active",L)}D=function(c){return c.returnValue="Vi estas pleniganta la aliĝformularon por IJK. Se vi forlasas la paĝon, la informoj jam donitaj de vi perdiĝos!"};$("input, select, textarea").change(function(){return window.onbeforeunload=D});$("#alighi-btn").click(function(){return window.onbeforeunload=null});if($(".button-error").length){return window.onbeforeunload=D}};$(function(){return a()})}).call(this);