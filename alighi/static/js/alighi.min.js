(function(){var a;a=function(){var l,Q,y,G,E,d,e,p,S,w,v,j,R,i,r,b,g,P,x,F,B,O,o,z,k,m,s,D,n,J,u,C,f,A,N,t,I,M,L,K,q,h,H;w=6;S=1000*60*60*24;v=S*365.25;$.datepicker.setDefaults({dateFormat:"yy-mm-dd",autoSize:true,currentText:"hodiaŭ",gotoCurrent:true,hideIfNoPrevNextType:true,showOtherMonths:true,selectOtherMonths:true,showButtonPanel:false,changeMonth:false,changeYear:false,yearRange:""+window.KOMENCJARO+":"+window.KOMENCJARO,dayNames:["dimanĉo","lundo","mardo","merkredo","ĵaŭdo","vendredo","sabato"],dayNamesMin:["di","lu","ma","me","ĵa","ve","sa"],monthNames:["januaro","februaro","marto","aprilo","majo","junio","julio","aŭgusto","septembro","oktobro","novembro","decembro"],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aŭg","sep","okt","nov","dec"]});$("#id_ekde").datepicker({defaultDate:window.KOMENCA_DATO,minDate:window.PLEJFRUA_DATO,maxDate:window.FINIGHA_DATO});$("#id_ghis").datepicker({defaultDate:window.FINIGHA_DATO,minDate:window.KOMENCA_DATO,maxDate:window.PLEJMALFRUA_DATO});$("#id_naskighdato").datepicker({changeMonth:true,changeYear:true,defaultDate:new Date(window.KOMENCA_DATO-v*25),yearRange:"-100:-2"});D=function(c){if(c){return(window.KOMENCA_DATO-c)/v}else{return c}};O=function(U){var c,V,T;if(U==null){return null}if(!U){return false}T=parseInt(U.slice(0,4),10);V=parseInt(U.slice(5,7),10)-1;c=parseInt(U.slice(8,10),10);return new Date(T,V,c)};b=function(V){var c,U,T;if(V==null){return null}if(!V){return false}T=V.getYear()+1900;U=V.getMonth()+1;if(U<10){U="0"+U}c=V.getDate();if(c<10){c="0"+c}return""+T+"-"+U+"-"+c};window.partoprenelektoj=function(){var ab,aa,ad,ae,Z,Y,X,W,V,U,T,c,ac=this;this.ekdato=O((Z=$("#id_ekde").val())!=null?Z:false);this.ghisdato=O((Y=$("#id_ghis").val())!=null?Y:false);this.naskighdato=O((X=$("#id_naskighdato").val())!=null?X:false);this.chu_plentempa=this.ekdato===false||this.ghisdato===false?null:this.ekdato.getTime()<=window.KOMENCA_DATO.getTime()&&this.ghisdato.getTime()>=window.FINIGHA_DATO.getTime();this.loghkategorio=(W=$('input[name="loghkategorio"]:checked').val())!=null?W:false;this.loghlando=(V=$("#id_loghlando :selected").val())!=null?V:false;this.landokategorio=!this.loghlando?false:window.landoj[this.loghlando];this.agho=D(this.naskighdato);this.aghkategoriaj_informoj=(function(){if(!this.agho){return this.agho}else{ae=null;ad=null;for(ab in window.limaghoj){if(!(ab<this.agho||((ae!=null)&&ab>ae))){ae=ab}if(!(ab>this.agho||((ad!=null)&&ab<ad))){ad=ab}}return window.limaghoj[ae]}}).call(this);this.aghkategorio=this.aghkategoriaj_informoj?this.aghkategoriaj_informoj[0]:this.aghkategoriaj_informoj;this.aghaldona_pago=this.aghkategoriaj_informoj?this.aghkategoriaj_informoj[1]*(1+Math.floor(this.agho)-parseInt(ad)):this.aghkategoriaj_informoj;this.alighkategorio=(U=$('input[name="antaupagos_ghis"]:checked').val())!=null?U:false;this.alighlimdato=this.alighkategorio?window.limdatoj[this.alighkategorio]:false;this.unuatago=Math.max(this.ektago,window.KOMENCA_DATO);this.lastatago=Math.min(this.ghistago,window.FINIGHA_DATO);this.tranoktoj=Math.floor((this.unuatago-this.lastatago)/S);this.superaj_tranoktoj=(function(){var af,ag;af=Math.floor(ac.ektago-ac.unuatago/S);ag=Math.floor(ac.lastatago-ac.ghistago/S);return af+ag})();this.partoprentagoj=Math.floor((this.unuatago-this.duatago)/S)+1;this.relativa_partopreno=this.chu_plentempa?1:this.partoprentagoj/5;this.loghkosto=(function(){var ag,af;if(ac.agho!==false&&ac.agho<=5){return 0}if(!(ac.loghkategorio!==false&&(ac.chu_plentempa!=null))){return false}af=(ag=window.loghkategorioj[ac.loghkategorio])!=null?ag[0]:void 0,ac.plentempa=af[0],ac.eksterkongresa=af[1];if(ac.chu_plentempa){return ac.plentempa+ac.superaj_tranoktoj*ac.eksterkongresaj}else{return(ac.tranoktoj+ac.superaj_tranoktoj)*ac.eksterkongresaj}})();this.programkotizo=this.agho!==false&&this.agho<=12?0:!((this.aghkategorio!=null)&&(this.landokategorio!=null)&&(this.alighkategorio!=null))?null:this.aghkategorio===false||this.landokategorio===false||this.alighkategorio===false?false:(T=window.programkotizoj[this.aghkategorio])!=null?(c=T[this.landokategorio])!=null?c[this.alighkategorio]:void 0:void 0;if(this.programkotizo){this.programkotizo*=this.relativa_partopreno}if(this.programkotizo){this.programkotizo+=this.aghaldona_pago?this.aghaldona_pago:0}this.chu_viando=(function(){var af,ag;if(window.krompagtipoj.viando==null){return null}ag=$('[name="manghotipo"]:checked').attr("id");af=$("label[for='"+ag+"']").text().toLowerCase();return -1!==af.indexOf("viand")})();aa=0;$('input[name="manghomendoj"]:checked').each(function(){return aa+=window.manghomendotipoj[$(this).val()]});this.manghokosto=isNaN(aa)?null:aa;if((this.manghokosto!=null)&&this.chu_viando){this.manghokosto+=window.krompagtipoj.viando}this.uearabato=!$("#id_chu_ueamembro").is(":checked")?0:(this.landokategorio!=null)&&this.programkotizo>0?this.landokategorio!==false?window.uearabatoj[this.landokategorio]:false:null;if(this.uearabato){this.uearabato*=Math.min(this.relativa_partopreno,1)}this.chu_invitletero=$("#id_chu_bezonas_invitleteron").is(":checked");return this.chu_ekskurso=$("#id_chu_tuttaga_ekskurso").is(":checked")};$("#js-active").val(1);$(".fakturo-placeholder").addClass("fakturo");$(".fakturo").append('<span class="label">Kotizo: </span>');d=$("<ul></ul>").appendTo(".fakturo");k=["programo","loghado","mangho","ekskurso","invitletero","uearabato","sumo"];for(M=0,q=k.length;M<q;M++){B=k[M];A=(function(){switch(B){case"programo":return"";case"uearabato":return"\u2013";case"sumo":return"=";default:return"+"}})();d.append("<li class='"+B+"-li'>            <div class='kotizo-signo "+B+"-signo'>"+A+"</div>            <div class='kotizo-ero "+B+"-ero'>                <div class='kotizo-kosto "+B+"-kosto'></div>                <div class='kotizo-klarigo "+B+"-klarigo'></div>            </div>        </li>")}$(".mangho-klarigo").text("manĝado");$(".programo-klarigo").text("programo");$(".ekskurso-klarigo").text("ekskurso");$(".invitletero-klarigo").text("invitletero");$(".uearabato-klarigo").text("UEA-rabato");$(".sumo-klarigo").text("sumo");m=function(){var U,Y,X,c,V,T,W;X=new partoprenelektoj;T=0;W="(nedifinita)";Y="(elektu)";if(X.manghokosto!=null){$(".mangho-kosto").text(X.manghokosto);T+=X.manghokosto;if(X.chu_viando){$(".mangho-klarigo").text("manĝado (viande)")}else{$(".mangho-klarigo").text("manĝado")}}else{$(".mangho-kosto").text(W)}if(X.loghkosto===false){$(".loghado-kosto").text(Y);$(".loghado-klarigo").text("loĝado")}else{if(X.loghkosto!=null){T+=X.loghkosto;V=(function(){if(X.chu_plentempa){if(X.superaj_tranoktoj===0){return"plentempa loĝado"}else{return"plentempa loĝado kaj "+X.superaj_tranoktoj+"                                 aldonaj tranoktoj"}}else{return"loĝado por "+(X.tranoktoj+X.superaj_tranoktoj)+"                       noktoj"}})();$(".loghado-kosto").text(X.loghkosto);$(".loghado-klarigo").text(V)}else{$(".loghado-kosto").text(W);$(".loghado-klarigo").text("loĝado")}}if(X.programkotizo===false){U=[];if(X.naskighdato===false){U.push("naskiĝdaton")}if(X.landokategorio===false){U.push("loĝlandon")}if(X.alighkategorio===false){U.push("antaŭpagan daton")}$(".programo-kosto").text("(elektu "+(U.join(" kaj "))+")");$(".programo-klarigo").text("programo")}else{if(X.programkotizo!=null){c="programo";if(!X.chu_plentempa){c+=" por "+X.partoprentagoj+" tagoj"}$(".programo-klarigo").text(c);$(".programo-kosto").text(X.programkotizo);T+=X.programkotizo}else{$(".programo-klarigo").text("programo");$(".programo-kosto").text(W)}}if(X.chu_ekskurso){$(".ekskurso-li").show();T+=window.krompagtipoj.ekskurso;$(".ekskurso-kosto").text(window.krompagtipoj.ekskurso)}else{$(".ekskurso-li").hide()}if(X.chu_invitletero){$(".invitletero-li").show();T+=window.krompagtipoj.invitletero;$(".invitletero-kosto").text(window.krompagtipoj.invitletero)}else{$(".invitletero-li").hide()}if(X.uearabato!=null){if(X.uearabato===false){$(".uearabato-li").show();$(".uearabato-kosto").text("(elektu loĝlandon)")}else{if(X.uearabato>0){T-=X.uearabato;$(".uearabato-li").show();$(".uearabato-kosto").text(X.uearabato)}else{$(".uearabato-li").hide()}}}else{$(".uearabato-li").show();$(".uearabato-kosto").text(W)}return $(".sumo-kosto").text(""+T+" €")};s=["#id_naskighdato","#id_loghlando",'input[name="loghkategorio"]','input[name="manghomendoj"]','[name="manghotipo"]',"#id_chu_ueamembro","#id_ekde","#id_ghis","#id_chu_bezonas_invitleteron","#id_chu_tuttaga_ekskurso",'input[name="antaupagos_ghis"]'];for(L=0,h=s.length;L<h;L++){f=s[L];$(f).change(m)}$("#id_loghlando option").each(function(){var c;c=$(this).text().match(/([^(]*)\(([^)]*)\)/);if(!(c!=null)){return}$(this).text(c[1]);return $(this).data("landokategorio"," "+c[2])});$("#id_loghlando").after('<span class="klarigo helptext"></span>').change(function(){return $(this).next(".helptext").text($(this).find(":selected").data("landokategorio"))});$("#id_loghlando").change(function(){var c;c=$(this).find(":selected").text().indexOf("Israelo")!==-1;return $('input[name="pagmaniero"]').each(function(){var T;T=$($(this).parents("li")[0]);if(T.is(':contains("nur en Israelo")')){if(c){return T.show()}else{$(this).prop("checked",false);return T.hide()}}})}).change();n=function(c){return function(){var U,T;U=p.tabs("option","active");T=U+c;if(T>=w){$("body, html").animate({scrollTop:$(".alighi").offset().top},400,"swing",function(){return $(".alighi").effect("highlight",{color:"red"})});return false}if(T<0||T>=w){return false}p.tabs("option","active",T);return false}};$(".reen, .antauen, .alighi").button();$(".reen").click(n(-1));$(".antauen").click(n(1));j=function(V,U){var c,T;c=(T=U.newTab)!=null?T:U.tab;$(".reen").button("option","disabled",c.index()===0);$(this).css("height","auto");return $(this).css("overflow","visible")};p=$("#form-tabs").tabs({hide:{effect:"slide",direction:"left"},show:{effect:"slide",direction:"right"},beforeActivate:function(Y,X){var c,T,V,U,W;$(this).css("height",$(this).height());$(this).css("overflow","hidden");U=X.newTab.index()-X.oldTab.index();if(Math.abs(U)===1){V=["left","right"]}else{V=["up","up"]}c=V[0],T=V[1];if(U<0){W=[T,c],c=W[0],T=W[1]}return p.tabs("option",{hide:{effect:"slide",direction:c},show:{effect:"slide",direction:T}})},activate:j,create:j});z=window.KOMENCA_DATO.getDate();o=window.FINIGHA_DATO.getDate();P=window.PLEJFRUA_DATO.getDate();g=window.PLEJMALFRUA_DATO.getDate();u=g-P;r=(R=O($("#id_ekde").val()))?R.getDate():z;i=(R=O($("#id_ghis").val()))?R.getDate():o;F=[];$("#id_ekde, #id_ghis").parent().hide();$("#id_ekde, #id_ghis").prevAll(".errorlist").find("li").each(function(){return F.push($(this).text())});e=$('<ul class="errorlist"></ul>');G=(function(){var U,c,T;T=[];for(U=0,c=F.length;U<c;U++){x=F[U];T.push($("<li>"+x+"</li>").appendTo(e))}return T})();t=$(".tab").map(function(){return $(this).width()});N=Math.max.apply(Math,$.makeArray(t));I=N-300-14*6;y=$('<li class="required">        <label for="id_datogamo">La daŭro de mia partopreno:</label></li>').insertAfter($("#id_ghis").parent());if(G.length>0){y.prepend(e)}Q=$("<div></div>").appendTo(y).width(I);E=$('<div id="datogamo-gvidilo"></div>').css({width:I,margin:"auto",padding:0,whiteSpace:"nowrap"});$.each((function(){H=[];for(var c=P;P<=g?c<=g:c>=g;P<=g?c++:c--){H.push(c)}return H}).apply(this),function(T,c){return $('<div class="datomarko" id="id_datomarko_'+c+'">'+c+"</div>").css({display:"inline-block",width:""+(100/u)+"%",margin:0,padding:0}).appendTo(E)});Q.append(E);l=$('<div class="datogamo" id="id_datogamo"></div>').appendTo(Q).css({width:I,clear:"both",left:"8px"}).slider({min:P,max:g,range:true,values:[r,i],change:function(W,V){var c,U,T;T=V.values,c=T[0],U=T[1];$("#id_ekde").val("2013-08-"+c).change();$("#id_ghis").val("2013-08-"+U).change();$(".datomarko").each(function(){return $(this).css({fontWeight:"normal"})});return $("#id_datomarko_"+c+", #id_datomarko_"+U).css({fontWeight:"bold"})}});l.slider("values",l.slider("values"));$("<div>la oficiala daŭro de IJK estas de la "+z+"-a             ĝis la "+o+"-a de aŭgusto, 2013</div>").appendTo(Q).css({width:I*(o-z)/u,height:"1em",fontSize:"80%",borderTop:"3px dotted #2a3753",margin:0,position:"relative",padding:0,left:14+(z-P)*I/u,color:"#2a3753",textAlign:"center",fontWeight:"bold"});J=null;$(".tab").each(function(){if($(this).find(".errorlist").length>0){B=$(this).attr("id");if(J==null){return J=parseInt(B.slice(B.indexOf("-")+1))}}});if(J!=null){p.tabs("option","active",J)}C=function(c){return c.returnValue="Vi estas pleniganta la aliĝformularon por IJK. Se vi forlasas la paĝon, la informoj jam donitaj de vi perdiĝos!"};$("input, select, textarea").change(function(){return window.onbeforeunload=C});$("#alighi-btn").click(function(){return window.onbeforeunload=null});if($(".button-error").length){return window.onbeforeunload=C}};$(function(){return a()})}).call(this);